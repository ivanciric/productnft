/*! For license information please see woonft.bundle.js.LICENSE.txt */
(()=>{var t={526:(t,e)=>{"use strict";e.byteLength=function(t){var e=a(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,o=a(t),i=o[0],c=o[1],u=new s(function(t,e,n){return 3*(e+n)/4-n}(0,i,c)),l=0,h=c>0?i-4:i;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===c&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===c&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,r=t.length,s=r%3,o=[],i=16383,a=0,u=r-s;a<u;a+=i)o.push(c(t,a,a+i>u?u:a+i));return 1===s?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===s&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")};for(var n=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)n[i]=o[i],r[o.charCodeAt(i)]=i;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,r){for(var s,o,i=[],a=e;a<r;a+=3)s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(n[(o=s)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},287:(t,e,n)=>{"use strict";const r=n(526),s=n(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=c,e.IS=50;const i=2147483647;function a(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return u(t,e,n)}function u(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|g(t,e);let r=a(n);const s=r.write(t,e);return s!==n&&(r=r.slice(0,s)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(K(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(K(t,ArrayBuffer)||t&&K(t.buffer,ArrayBuffer))return p(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(K(t,SharedArrayBuffer)||t&&K(t.buffer,SharedArrayBuffer)))return p(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return c.from(r,e,n);const s=function(t){if(c.isBuffer(t)){const e=0|d(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||V(t.length)?a(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return l(t),a(t<0?0:0|d(t))}function f(t){const e=t.length<0?0:0|d(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function p(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,c.prototype),r}function d(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function g(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||K(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(s)return r?-1:J(t).length;e=(""+e).toLowerCase(),s=!0}}function y(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,n);case"utf8":case"utf-8":return R(this,e,n);case"ascii":return B(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function w(t,e,n,r,s){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),V(n=+n)&&(n=s?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(s)return-1;n=t.length-1}else if(n<0){if(!s)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,s);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,s);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,s){let o,i=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;i=2,a/=2,c/=2,n/=2}function u(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(s){let r=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*i}else-1!==r&&(o-=o-r),r=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(u(t,o+r)!==u(e,r)){n=!1;break}if(n)return o}return-1}function v(t,e,n,r){n=Number(n)||0;const s=t.length-n;r?(r=Number(r))>s&&(r=s):r=s;const o=e.length;let i;for(r>o/2&&(r=o/2),i=0;i<r;++i){const r=parseInt(e.substr(2*i,2),16);if(V(r))return i;t[n+i]=r}return i}function _(t,e,n,r){return z(J(e,t.length-n),t,n,r)}function E(t,e,n,r){return z(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return z(G(e),t,n,r)}function A(t,e,n,r){return z(function(t,e){let n,r,s;const o=[];for(let i=0;i<t.length&&!((e-=2)<0);++i)n=t.charCodeAt(i),r=n>>8,s=n%256,o.push(s),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function R(t,e,n){n=Math.min(t.length,n);const r=[];let s=e;for(;s<n;){const e=t[s];let o=null,i=e>239?4:e>223?3:e>191?2:1;if(s+i<=n){let n,r,a,c;switch(i){case 1:e<128&&(o=e);break;case 2:n=t[s+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(o=c));break;case 3:n=t[s+1],r=t[s+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=t[s+1],r=t[s+2],a=t[s+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,i=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),s+=i}return function(t){const e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=S));return n}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return u(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return function(t,e,n){return l(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},c.allocUnsafe=function(t){return h(t)},c.allocUnsafeSlow=function(t){return h(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(K(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),K(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let s=0,o=Math.min(n,r);s<o;++s)if(t[s]!==e[s]){n=t[s],r=e[s];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=c.allocUnsafe(e);let s=0;for(n=0;n<t.length;++n){let e=t[n];if(K(e,Uint8Array))s+e.length>r.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(r,s)):Uint8Array.prototype.set.call(r,e,s);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,s)}s+=e.length}return r},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?R(this,0,t):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.IS;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(t,e,n,r,s){if(K(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),e<0||n>t.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&e>=n)return 0;if(r>=s)return-1;if(e>=n)return 1;if(this===t)return 0;let o=(s>>>=0)-(r>>>=0),i=(n>>>=0)-(e>>>=0);const a=Math.min(o,i),u=this.slice(r,s),l=t.slice(e,n);for(let t=0;t<a;++t)if(u[t]!==l[t]){o=u[t],i=l[t];break}return o<i?-1:i<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const s=this.length-e;if((void 0===n||n>s)&&(n=s),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":case"latin1":case"binary":return E(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const S=4096;function B(t,e,n){let r="";n=Math.min(t.length,n);for(let s=e;s<n;++s)r+=String.fromCharCode(127&t[s]);return r}function P(t,e,n){let r="";n=Math.min(t.length,n);for(let s=e;s<n;++s)r+=String.fromCharCode(t[s]);return r}function O(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let s="";for(let r=e;r<n;++r)s+=Y[t[r]];return s}function C(t,e,n){const r=t.slice(e,n);let s="";for(let t=0;t<r.length-1;t+=2)s+=String.fromCharCode(r[t]+256*r[t+1]);return s}function $(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,r,s,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function T(t,e,n,r,s){D(e,r,s,t,n,7);let o=Number(e&BigInt(4294967295));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;let i=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,n}function U(t,e,n,r,s){D(e,r,s,t,n,7);let o=Number(e&BigInt(4294967295));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;let i=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=i,i>>=8,t[n+2]=i,i>>=8,t[n+1]=i,i>>=8,t[n]=i,n+8}function k(t,e,n,r,s,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,r,o){return e=+e,n>>>=0,o||k(t,0,n,4),s.write(t,e,n,r,23,4),n+4}function M(t,e,n,r,o){return e=+e,n>>>=0,o||k(t,0,n,8),s.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||$(t,e,this.length);let r=this[t],s=1,o=0;for(;++o<e&&(s*=256);)r+=this[t+o]*s;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||$(t,e,this.length);let r=this[t+--e],s=1;for(;e>0&&(s*=256);)r+=this[t+--e]*s;return r},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||$(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||$(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||$(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||$(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||$(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=Q((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||X(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,s=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(s)<<BigInt(32))})),c.prototype.readBigUInt64BE=Q((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||X(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],s=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(s)})),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||$(t,e,this.length);let r=this[t],s=1,o=0;for(;++o<e&&(s*=256);)r+=this[t+o]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||$(t,e,this.length);let r=e,s=1,o=this[t+--r];for(;r>0&&(s*=256);)o+=this[t+--r]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return t>>>=0,e||$(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||$(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||$(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||$(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||$(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=Q((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||X(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=Q((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||X(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||$(t,4,this.length),s.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||$(t,4,this.length),s.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||$(t,8,this.length),s.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||$(t,8,this.length),s.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||L(this,t,e,n,Math.pow(2,8*n)-1,0);let s=1,o=0;for(this[e]=255&t;++o<n&&(s*=256);)this[e+o]=t/s&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||L(this,t,e,n,Math.pow(2,8*n)-1,0);let s=n-1,o=1;for(this[e+s]=255&t;--s>=0&&(o*=256);)this[e+s]=t/o&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=Q((function(t,e=0){return T(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Q((function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}let s=0,o=1,i=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&0===i&&0!==this[e+s-1]&&(i=1),this[e+s]=(t/o>>0)-i&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}let s=n-1,o=1,i=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===i&&0!==this[e+s+1]&&(i=1),this[e+s]=(t/o>>0)-i&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=Q((function(t,e=0){return T(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Q((function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return M(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return M(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const s=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),s},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{const o=c.isBuffer(t)?t:c.from(t,r),i=o.length;if(0===i)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<n-e;++s)this[s+e]=o[s%i]}return this};const N={};function F(t,e,n){N[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function q(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function D(t,e,n,r,s,o){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let s;throw s=o>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new N.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,n){W(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||X(e,t.length-(n+1))}(r,s,o)}function W(t,e){if("number"!=typeof t)throw new N.ERR_INVALID_ARG_TYPE(e,"number",t)}function X(t,e,n){if(Math.floor(t)!==t)throw W(t,n),new N.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,s=n;return Number.isInteger(n)&&Math.abs(n)>2**32?s=q(String(n)):"bigint"==typeof n&&(s=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(s=q(s)),s+="n"),r+=` It must be ${e}. Received ${s}`,r}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function J(t,e){let n;e=e||1/0;const r=t.length;let s=null;const o=[];for(let i=0;i<r;++i){if(n=t.charCodeAt(i),n>55295&&n<57344){if(!s){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(i+1===r){(e-=3)>-1&&o.push(239,191,189);continue}s=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),s=n;continue}n=65536+(s-55296<<10|n-56320)}else s&&(e-=3)>-1&&o.push(239,191,189);if(s=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){let s;for(s=0;s<r&&!(s+n>=e.length||s>=t.length);++s)e[s+n]=t[s];return s}function K(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function V(t){return t!=t}const Y=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let s=0;s<16;++s)e[r+s]=t[n]+t[s]}return e}();function Q(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},251:(t,e)=>{e.read=function(t,e,n,r,s){var o,i,a=8*s-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?s-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=f,l-=8);for(i=o&(1<<-l)-1,o>>=-l,l+=r;l>0;i=256*i+t[e+h],h+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,r),o-=u}return(p?-1:1)*i*Math.pow(2,o-r)},e.write=function(t,e,n,r,s,o){var i,a,c,u=8*o-s-1,l=(1<<u)-1,h=l>>1,f=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,i=l):(i=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-i))<1&&(i--,c*=2),(e+=i+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(i++,c/=2),i+h>=l?(a=0,i=l):i+h>=1?(a=(e*c-1)*Math.pow(2,s),i+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),i=0));s>=8;t[n+p]=255&a,p+=d,a/=256,s-=8);for(i=i<<s|a,u+=s;u>0;t[n+p]=255&i,p+=d,i/=256,u-=8);t[n+p-d]|=128*g}}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};n.r(t),n.d(t,{APIConnectionError:()=>_,APIConnectionTimeoutError:()=>E,APIError:()=>b,APIUserAbortError:()=>v,AuthenticationError:()=>A,BadRequestError:()=>x,ConflictError:()=>S,InternalServerError:()=>O,NotFoundError:()=>R,OpenAIError:()=>w,PermissionDeniedError:()=>I,RateLimitError:()=>P,UnprocessableEntityError:()=>B});const e="4.28.4";let r,s,o,i,a,c,u,l,h,f=!1,p=null,d=null,g=null,y=null;class m{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}r||function(t,e={auto:!1}){if(f)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(r)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${r}'\``);f=e.auto,r=t.kind,s=t.fetch,p=t.Request,d=t.Response,g=t.Headers,o=t.FormData,y=t.Blob,i=t.File,a=t.ReadableStream,c=t.getMultipartRequestOptions,u=t.getDefaultAgent,l=t.fileFromPath,h=t.isFsReadStream}(function({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,o;try{n=fetch,r=Request,s=Response,o=Headers}catch(t){throw new Error(`this environment is missing the following Web Fetch API type: ${t.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:o,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(t,e)=>({...e,body:new m(t)}),getDefaultAgent:t=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:t=>!1}}(),{auto:!0});class w extends Error{}class b extends w{constructor(t,e,n,r){super(`${b.makeMessage(t,e,n)}`),this.status=t,this.headers=r;const s=e;this.error=s,this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(t,e,n){const r=e?.message?"string"==typeof e.message?e.message:JSON.stringify(e.message):e?JSON.stringify(e):n;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,e,n,r){if(!t)return new _({cause:ht(e)});const s=e?.error;return 400===t?new x(t,s,n,r):401===t?new A(t,s,n,r):403===t?new I(t,s,n,r):404===t?new R(t,s,n,r):409===t?new S(t,s,n,r):422===t?new B(t,s,n,r):429===t?new P(t,s,n,r):t>=500?new O(t,s,n,r):new b(t,s,n,r)}}class v extends b{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class _ extends b{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,e&&(this.cause=e)}}class E extends _{constructor({message:t}={}){super({message:t??"Request timed out."})}}class x extends b{constructor(){super(...arguments),this.status=400}}class A extends b{constructor(){super(...arguments),this.status=401}}class I extends b{constructor(){super(...arguments),this.status=403}}class R extends b{constructor(){super(...arguments),this.status=404}}class S extends b{constructor(){super(...arguments),this.status=409}}class B extends b{constructor(){super(...arguments),this.status=422}}class P extends b{constructor(){super(...arguments),this.status=429}}class O extends b{}var C=n(287).hp;class ${constructor(t,e){this.iterator=t,this.controller=e}static fromSSEResponse(t,e){let n=!1;const r=new L;return new $((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let s=!1;try{for await(const n of async function*(){if(!t.body)throw e.abort(),new w("Attempted to iterate over a response with no body");const n=new T,s=U(t.body);for await(const t of s)for(const e of n.decode(t)){const t=r.decode(e);t&&(yield t)}for(const t of n.flush()){const e=r.decode(t);e&&(yield e)}}())if(!s)if(n.data.startsWith("[DONE]"))s=!0;else if(null===n.event){let t;try{t=JSON.parse(n.data)}catch(t){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),t}if(t&&t.error)throw new b(void 0,t.error,void 0,void 0);yield t}s=!0}catch(t){if(t instanceof Error&&"AbortError"===t.name)return;throw t}finally{s||e.abort()}}),e)}static fromReadableStream(t,e){let n=!1;return new $((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const e of async function*(){const e=new T,n=U(t);for await(const t of n)for(const n of e.decode(t))yield n;for(const t of e.flush())yield t}())r||e&&(yield JSON.parse(e));r=!0}catch(t){if(t instanceof Error&&"AbortError"===t.name)return;throw t}finally{r||e.abort()}}),e)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();t.push(r),e.push(r)}return r.shift()}});return[new $((()=>r(t)),this.controller),new $((()=>r(e)),this.controller)]}toReadableStream(){const t=this;let e;const n=new TextEncoder;return new a({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{const{value:r,done:s}=await e.next();if(s)return t.close();const o=n.encode(JSON.stringify(r)+"\n");t.enqueue(o)}catch(e){t.error(e)}},async cancel(){await(e.return?.())}})}}class L{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const t={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],t}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,n,r]=function(t,e){const n=t.indexOf(":");return-1!==n?[t.substring(0,n),":",t.substring(n+1)]:[t,"",""]}(t);return r.startsWith(" ")&&(r=r.substring(1)),"event"===e?this.event=r:"data"===e&&this.data.push(r),null}}class T{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let e=this.decodeText(t);if(this.trailingCR&&(e="\r"+e,this.trailingCR=!1),e.endsWith("\r")&&(this.trailingCR=!0,e=e.slice(0,-1)),!e)return[];const n=T.NEWLINE_CHARS.has(e[e.length-1]||"");let r=e.split(T.NEWLINE_REGEXP);return 1!==r.length||n?(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),n||(this.buffer=[r.pop()||""]),r):(this.buffer.push(r[0]),[])}decodeText(t){if(null==t)return"";if("string"==typeof t)return t;if(void 0!==C){if(t instanceof C)return t.toString();if(t instanceof Uint8Array)return C.from(t).toString();throw new w(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new w(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new w("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}function U(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}T.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","","","","","\u2028","\u2029"]),T.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;var k=n(287).hp;const j=t=>null!=t&&"object"==typeof t&&"string"==typeof t.url&&"function"==typeof t.blob,M=t=>null!=t&&"object"==typeof t&&"number"==typeof t.size&&"string"==typeof t.type&&"function"==typeof t.text&&"function"==typeof t.slice&&"function"==typeof t.arrayBuffer;async function N(t,e,n={}){if(t=await t,j(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new i([r],e,n)}const r=await async function(t){let e=[];if("string"==typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(M(t))e.push(await t.arrayBuffer());else{if(!q(t))throw new Error(`Unexpected data type: ${typeof t}; constructor: ${t?.constructor?.name}; props: ${function(t){return`[${Object.getOwnPropertyNames(t).map((t=>`"${t}"`)).join(", ")}]`}(t)}`);for await(const n of t)e.push(n)}return e}(t);if(e||(e=function(t){return F(t.name)||F(t.filename)||F(t.path)?.split(/[\\/]/).pop()}(t)??"unknown_file"),!n.type){const t=r[0]?.type;"string"==typeof t&&(n={...n,type:t})}return new i(r,e,n)}const F=t=>"string"==typeof t?t:void 0!==k&&t instanceof k?String(t):void 0,q=t=>null!=t&&"object"==typeof t&&"function"==typeof t[Symbol.asyncIterator],D=t=>t&&"object"==typeof t&&t.body&&"MultipartBody"===t[Symbol.toStringTag],W=async t=>{const e=await X(t.body);return c(e,t)},X=async t=>{const e=new o;return await Promise.all(Object.entries(t||{}).map((([t,n])=>H(e,t,n)))),e},H=async(t,e,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)t.append(e,String(n));else if((t=>(t=>null!=t&&"object"==typeof t&&"string"==typeof t.name&&"number"==typeof t.lastModified&&M(t))(t)||j(t)||h(t))(n)){const r=await N(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map((n=>H(t,e+"[]",n))));else{if("object"!=typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map((([n,r])=>H(t,`${e}[${n}]`,r))))}}};var J,G=n(287).hp;async function z(t){const{response:e}=t;if(t.options.stream)return yt("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):$.fromSSEResponse(e,t.controller);if(204===e.status)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type");if(n?.includes("application/json")||n?.includes("application/vnd.api+json")){const t=await e.json();return yt("response",e.status,e.url,e.headers,t),t}const r=await e.text();return yt("response",e.status,e.url,e.headers,r),r}class K extends Promise{constructor(t,e=z){super((t=>{t(null)})),this.responsePromise=t,this.parseResponse=e}_thenUnwrap(t){return new K(this.responsePromise,(async e=>t(await this.parseResponse(e))))}asResponse(){return this.responsePromise.then((t=>t.response))}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class V{constructor({baseURL:t,maxRetries:e=2,timeout:n=6e5,httpAgent:r,fetch:o}){this.baseURL=t,this.maxRetries=lt("maxRetries",e),this.timeout=lt("timeout",n),this.httpAgent=r,this.fetch=o??s}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...ot(),...this.authHeaders(t)}}validateHeaders(t,e){}defaultIdempotencyKey(){return`stainless-node-retry-${mt()}`}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,n){return this.request(Promise.resolve(n).then((n=>({method:t,path:e,...n}))))}getAPIList(t,e,n){return this.requestAPIList(e,{method:"get",path:t,...n})}calculateContentLength(t){if("string"==typeof t){if(void 0!==G)return G.byteLength(t,"utf8").toString();if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(t).length.toString()}return null}buildRequest(t){const{method:e,path:n,query:r,headers:s={}}=t,o=D(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,i=this.calculateContentLength(o),a=this.buildURL(n,r);"timeout"in t&&lt("timeout",t.timeout);const c=t.timeout??this.timeout,l=t.httpAgent??this.httpAgent??u(a),h=c+1e3;return"number"==typeof l?.options?.timeout&&h>(l.options.timeout??0)&&(l.options.timeout=h),this.idempotencyHeader&&"get"!==e&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey),{req:{method:e,...o&&{body:o},headers:this.buildHeaders({options:t,headers:s,contentLength:i}),...l&&{agent:l},signal:t.signal??null},url:a,timeout:c}}buildHeaders({options:t,headers:e,contentLength:n}){const s={};return n&&(s["content-length"]=n),gt(s,this.defaultHeaders(t)),gt(s,e),D(t.body)&&"node"!==r&&delete s["content-type"],this.validateHeaders(s,e),s}async prepareOptions(t){}async prepareRequest(t,{url:e,options:n}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map((t=>[...t]))):{...t}:{}}makeStatusError(t,e,n,r){return b.generate(t,e,n,r)}request(t,e=null){return new K(this.makeRequest(t,e))}async makeRequest(t,e){const n=await t;null==e&&(e=n.maxRetries??this.maxRetries),await this.prepareOptions(n);const{req:r,url:s,timeout:o}=this.buildRequest(n);if(await this.prepareRequest(r,{url:s,options:n}),yt("request",s,n,r.headers),n.signal?.aborted)throw new v;const i=new AbortController,a=await this.fetchWithTimeout(s,r,o,i).catch(ht);if(a instanceof Error){if(n.signal?.aborted)throw new v;if(e)return this.retryRequest(n,e);if("AbortError"===a.name)throw new E;throw new _({cause:a})}const c=Z(a.headers);if(!a.ok){if(e&&this.shouldRetry(a))return yt(`response (error; retrying, ${e} attempts remaining)`,a.status,s,c),this.retryRequest(n,e,c);const t=await a.text().catch((t=>ht(t).message)),r=it(t),o=r?void 0:t;throw yt(`response (error; ${e?"(error; no more retries left)":"(error; not retryable)"})`,a.status,s,c,o),this.makeStatusError(a.status,r,o,c)}return{response:a,options:n,controller:i}}requestAPIList(t,e){const n=this.makeRequest(e,null);return new Q(this,n,t)}buildURL(t,e){const n=ct(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),r=this.defaultQuery();return pt(r)||(e={...r,...e}),"object"==typeof e&&e&&!Array.isArray(e)&&(n.search=this.stringifyQuery(e)),n.toString()}stringifyQuery(t){return Object.entries(t).filter((([t,e])=>void 0!==e)).map((([t,e])=>{if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return`${encodeURIComponent(t)}=${encodeURIComponent(e)}`;if(null===e)return`${encodeURIComponent(t)}=`;throw new w(`Cannot stringify type ${typeof e}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)})).join("&")}async fetchWithTimeout(t,e,n,r){const{signal:s,...o}=e||{};s&&s.addEventListener("abort",(()=>r.abort()));const i=setTimeout((()=>r.abort()),n);return this.getRequestClient().fetch.call(void 0,t,{signal:r.signal,...o}).finally((()=>{clearTimeout(i)}))}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const e=t.headers.get("x-should-retry");return"true"===e||"false"!==e&&(408===t.status||409===t.status||429===t.status||t.status>=500)}async retryRequest(t,e,n){let r;const s=n?.["retry-after-ms"];if(s){const t=parseFloat(s);Number.isNaN(t)||(r=t)}const o=n?.["retry-after"];if(o&&!r){const t=parseFloat(o);r=Number.isNaN(t)?Date.parse(o)-Date.now():1e3*t}if(!(r&&0<=r&&r<6e4)){const n=t.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(e,n)}return await ut(r),this.makeRequest(t,e-1)}calculateDefaultRetryTimeoutMillis(t,e){const n=e-t;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${e}`}}class Y{constructor(t,e,n,r){J.set(this,void 0),function(t,e,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?s.call(t,n):s?s.value=n:e.set(t,n)}(this,J,t,"f"),this.options=r,this.response=e,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new w("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const e={...this.options};if("params"in t&&"object"==typeof e.query)e.query={...e.query,...t.params};else if("url"in t){const n=[...Object.entries(e.query||{}),...t.url.searchParams.entries()];for(const[e,r]of n)t.url.searchParams.set(e,r);e.query=void 0,e.path=t.url.toString()}return await function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}(this,J,"f").requestAPIList(this.constructor,e)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(J=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const e of t.getPaginatedItems())yield e}}class Q extends K{constructor(t,e,n){super(e,(async e=>new n(t,e.response,await z(e),e.options)))}async*[Symbol.asyncIterator](){const t=await(this);for await(const e of t)yield e}}const Z=t=>new Proxy(Object.fromEntries(t.entries()),{get(t,e){const n=e.toString();return t[n.toLowerCase()]||t[n]}}),tt={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},et=t=>"object"==typeof t&&null!==t&&!pt(t)&&Object.keys(t).every((t=>dt(tt,t))),nt=t=>"x32"===t?"x32":"x86_64"===t||"x64"===t?"x64":"arm"===t?"arm":"aarch64"===t||"arm64"===t?"arm64":t?`other:${t}`:"unknown",rt=t=>(t=t.toLowerCase()).includes("ios")?"iOS":"android"===t?"Android":"darwin"===t?"MacOS":"win32"===t?"Windows":"freebsd"===t?"FreeBSD":"openbsd"===t?"OpenBSD":"linux"===t?"Linux":t?`Other:${t}`:"Unknown";let st;const ot=()=>st??(st=(()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e,"X-Stainless-OS":rt(Deno.build.os),"X-Stainless-Arch":nt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e,"X-Stainless-OS":rt(process.platform),"X-Stainless-Arch":nt(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=function(){if("undefined"==typeof navigator||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const t=n.exec(navigator.userAgent);if(t)return{browser:e,version:`${t[1]||0}.${t[2]||0}.${t[3]||0}`}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),it=t=>{try{return JSON.parse(t)}catch(t){return}},at=new RegExp("^(?:[a-z]+:)?//","i"),ct=t=>at.test(t),ut=t=>new Promise((e=>setTimeout(e,t))),lt=(t,e)=>{if("number"!=typeof e||!Number.isInteger(e))throw new w(`${t} must be an integer`);if(e<0)throw new w(`${t} must be a positive integer`);return e},ht=t=>t instanceof Error?t:new Error(t),ft=t=>"undefined"!=typeof process?process.env?.[t]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(t)?.trim():void 0;function pt(t){if(!t)return!0;for(const e in t)return!1;return!0}function dt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gt(t,e){for(const n in e){if(!dt(e,n))continue;const r=n.toLowerCase();if(!r)continue;const s=e[n];null===s?delete t[r]:void 0!==s&&(t[r]=s)}}function yt(t,...e){"undefined"!=typeof process&&"true"===process.env.DEBUG&&console.log(`OpenAI:DEBUG:${t}`,...e)}const mt=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}));class wt extends Y{constructor(t,e,n,r){super(t,e,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class bt extends Y{constructor(t,e,n,r){super(t,e,n,r),this.data=n.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const e=Object.fromEntries(t.url.searchParams);return Object.keys(e).length?e:null}nextPageInfo(){const t=this.getPaginatedItems();if(!t.length)return null;const e=t[t.length-1]?.id;return e?{params:{after:e}}:null}}class vt{constructor(t){this._client=t}}class _t extends vt{create(t,e){return this._client.post("/completions",{body:t,...e,stream:t.stream??!1})}}_t||(_t={});class Et extends vt{create(t,e){return this._client.post("/chat/completions",{body:t,...e,stream:t.stream??!1})}}Et||(Et={});class xt extends vt{constructor(){super(...arguments),this.completions=new Et(this._client)}}!function(t){t.Completions=Et}(xt||(xt={}));class At extends vt{create(t,e){return this._client.post("/embeddings",{body:t,...e})}}At||(At={});class It extends vt{create(t,e){return this._client.post("/files",W({body:t,...e}))}retrieve(t,e){return this._client.get(`/files/${t}`,e)}list(t={},e){return et(t)?this.list({},t):this._client.getAPIList("/files",Rt,{query:t,...e})}del(t,e){return this._client.delete(`/files/${t}`,e)}content(t,e){return this._client.get(`/files/${t}/content`,{...e,__binaryResponse:!0})}retrieveContent(t,e){return this._client.get(`/files/${t}/content`,{...e,headers:{Accept:"application/json",...e?.headers}})}async waitForProcessing(t,{pollInterval:e=5e3,maxWait:n=18e5}={}){const r=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(t);for(;!o.status||!r.has(o.status);)if(await ut(e),o=await this.retrieve(t),Date.now()-s>n)throw new E({message:`Giving up on waiting for file ${t} to finish processing after ${n} milliseconds.`});return o}}class Rt extends wt{}!function(t){t.FileObjectsPage=Rt}(It||(It={}));class St extends vt{createVariation(t,e){return this._client.post("/images/variations",W({body:t,...e}))}edit(t,e){return this._client.post("/images/edits",W({body:t,...e}))}generate(t,e){return this._client.post("/images/generations",{body:t,...e})}}St||(St={});class Bt extends vt{create(t,e){return this._client.post("/audio/speech",{body:t,...e,__binaryResponse:!0})}}Bt||(Bt={});class Pt extends vt{create(t,e){return this._client.post("/audio/transcriptions",W({body:t,...e}))}}Pt||(Pt={});class Ot extends vt{create(t,e){return this._client.post("/audio/translations",W({body:t,...e}))}}Ot||(Ot={});class Ct extends vt{constructor(){super(...arguments),this.transcriptions=new Pt(this._client),this.translations=new Ot(this._client),this.speech=new Bt(this._client)}}!function(t){t.Transcriptions=Pt,t.Translations=Ot,t.Speech=Bt}(Ct||(Ct={}));class $t extends vt{create(t,e){return this._client.post("/moderations",{body:t,...e})}}$t||($t={});class Lt extends vt{retrieve(t,e){return this._client.get(`/models/${t}`,e)}list(t){return this._client.getAPIList("/models",Tt,t)}del(t,e){return this._client.delete(`/models/${t}`,e)}}class Tt extends wt{}!function(t){t.ModelsPage=Tt}(Lt||(Lt={}));class Ut extends vt{create(t,e){return this._client.post("/fine_tuning/jobs",{body:t,...e})}retrieve(t,e){return this._client.get(`/fine_tuning/jobs/${t}`,e)}list(t={},e){return et(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",kt,{query:t,...e})}cancel(t,e){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,e)}listEvents(t,e={},n){return et(e)?this.listEvents(t,{},e):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,jt,{query:e,...n})}}class kt extends bt{}class jt extends bt{}!function(t){t.FineTuningJobsPage=kt,t.FineTuningJobEventsPage=jt}(Ut||(Ut={}));class Mt extends vt{constructor(){super(...arguments),this.jobs=new Ut(this._client)}}!function(t){t.Jobs=Ut,t.FineTuningJobsPage=kt,t.FineTuningJobEventsPage=jt}(Mt||(Mt={}));class Nt extends vt{create(t,e,n){return this._client.post(`/assistants/${t}/files`,{body:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}retrieve(t,e,n){return this._client.get(`/assistants/${t}/files/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(t,e={},n){return et(e)?this.list(t,{},e):this._client.getAPIList(`/assistants/${t}/files`,Ft,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}del(t,e,n){return this._client.delete(`/assistants/${t}/files/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class Ft extends bt{}!function(t){t.AssistantFilesPage=Ft}(Nt||(Nt={}));class qt extends vt{constructor(){super(...arguments),this.files=new Nt(this._client)}create(t,e){return this._client.post("/assistants",{body:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e?.headers}})}retrieve(t,e){return this._client.get(`/assistants/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e?.headers}})}update(t,e,n){return this._client.post(`/assistants/${t}`,{body:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(t={},e){return et(t)?this.list({},t):this._client.getAPIList("/assistants",Dt,{query:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e?.headers}})}del(t,e){return this._client.delete(`/assistants/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e?.headers}})}}class Dt extends bt{}function Wt(t){return"function"==typeof t.parse}!function(t){t.AssistantsPage=Dt,t.Files=Nt,t.AssistantFilesPage=Ft}(qt||(qt={}));const Xt=t=>"assistant"===t?.role,Ht=t=>"function"===t?.role,Jt=t=>"tool"===t?.role;var Gt,zt,Kt,Vt,Yt,Qt,Zt,te,ee,ne,re,se,oe,ie,ae,ce,ue,le,he,fe,pe=function(t,e,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(t,n):s?s.value=n:e.set(t,n),n},de=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};const ge=10;class ye{constructor(){Gt.add(this),this.controller=new AbortController,zt.set(this,void 0),Kt.set(this,(()=>{})),Vt.set(this,(()=>{})),Yt.set(this,void 0),Qt.set(this,(()=>{})),Zt.set(this,(()=>{})),te.set(this,{}),this._chatCompletions=[],this.messages=[],ee.set(this,!1),ne.set(this,!1),re.set(this,!1),se.set(this,!1),le.set(this,(t=>{if(pe(this,ne,!0,"f"),t instanceof Error&&"AbortError"===t.name&&(t=new v),t instanceof v)return pe(this,re,!0,"f"),this._emit("abort",t);if(t instanceof w)return this._emit("error",t);if(t instanceof Error){const e=new w(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new w(String(t)))})),pe(this,zt,new Promise(((t,e)=>{pe(this,Kt,t,"f"),pe(this,Vt,e,"f")})),"f"),pe(this,Yt,new Promise(((t,e)=>{pe(this,Qt,t,"f"),pe(this,Zt,e,"f")})),"f"),de(this,zt,"f").catch((()=>{})),de(this,Yt,"f").catch((()=>{}))}_run(t){setTimeout((()=>{t().then((()=>{this._emitFinal(),this._emit("end")}),de(this,le,"f"))}),0)}_addChatCompletion(t){this._chatCompletions.push(t),this._emit("chatCompletion",t);const e=t.choices[0]?.message;return e&&this._addMessage(e),t}_addMessage(t,e=!0){if("content"in t||(t.content=null),this.messages.push(t),e)if(this._emit("message",t),(Ht(t)||Jt(t))&&t.content)this._emit("functionCallResult",t.content);else if(Xt(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(Xt(t)&&t.tool_calls)for(const e of t.tool_calls)"function"===e.type&&this._emit("functionCall",e.function)}_connected(){this.ended||(de(this,Kt,"f").call(this),this._emit("connect"))}get ended(){return de(this,ee,"f")}get errored(){return de(this,ne,"f")}get aborted(){return de(this,re,"f")}abort(){this.controller.abort()}on(t,e){return(de(this,te,"f")[t]||(de(this,te,"f")[t]=[])).push({listener:e}),this}off(t,e){const n=de(this,te,"f")[t];if(!n)return this;const r=n.findIndex((t=>t.listener===e));return r>=0&&n.splice(r,1),this}once(t,e){return(de(this,te,"f")[t]||(de(this,te,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise(((e,n)=>{pe(this,se,!0,"f"),"error"!==t&&this.once("error",n),this.once(t,e)}))}async done(){pe(this,se,!0,"f"),await de(this,Yt,"f")}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new w("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),de(this,Gt,"m",oe).call(this)}async finalMessage(){return await this.done(),de(this,Gt,"m",ie).call(this)}async finalFunctionCall(){return await this.done(),de(this,Gt,"m",ae).call(this)}async finalFunctionCallResult(){return await this.done(),de(this,Gt,"m",ce).call(this)}async totalUsage(){return await this.done(),de(this,Gt,"m",ue).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(t,...e){if(de(this,ee,"f"))return;"end"===t&&(pe(this,ee,!0,"f"),de(this,Qt,"f").call(this));const n=de(this,te,"f")[t];if(n&&(de(this,te,"f")[t]=n.filter((t=>!t.once)),n.forEach((({listener:t})=>t(...e)))),"abort"===t){const t=e[0];return de(this,se,"f")||n?.length||Promise.reject(t),de(this,Vt,"f").call(this,t),de(this,Zt,"f").call(this,t),void this._emit("end")}if("error"===t){const t=e[0];de(this,se,"f")||n?.length||Promise.reject(t),de(this,Vt,"f").call(this,t),de(this,Zt,"f").call(this,t),this._emit("end")}}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const e=de(this,Gt,"m",ie).call(this);e&&this._emit("finalMessage",e);const n=de(this,Gt,"m",oe).call(this);n&&this._emit("finalContent",n);const r=de(this,Gt,"m",ae).call(this);r&&this._emit("finalFunctionCall",r);const s=de(this,Gt,"m",ce).call(this);null!=s&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some((t=>t.usage))&&this._emit("totalUsage",de(this,Gt,"m",ue).call(this))}async _createChatCompletion(t,e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),de(this,Gt,"m",he).call(this,e);const s=await t.create({...e,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s)}async _runChatCompletion(t,e,n){for(const t of e.messages)this._addMessage(t,!1);return await this._createChatCompletion(t,e,n)}async _runFunctions(t,e,n){const r="function",{function_call:s="auto",stream:o,...i}=e,a="string"!=typeof s&&s?.name,{maxChatCompletions:c=ge}=n||{},u={};for(const t of e.functions)u[t.name||t.function.name]=t;const l=e.functions.map((t=>({name:t.name||t.function.name,parameters:t.parameters,description:t.description})));for(const t of e.messages)this._addMessage(t,!1);for(let e=0;e<c;++e){const e=await this._createChatCompletion(t,{...i,function_call:s,functions:l,messages:[...this.messages]},n),o=e.choices[0]?.message;if(!o)throw new w("missing message in ChatCompletion response");if(!o.function_call)return;const{name:c,arguments:h}=o.function_call,f=u[c];if(!f){const t=`Invalid function_call: ${JSON.stringify(c)}. Available options are: ${l.map((t=>JSON.stringify(t.name))).join(", ")}. Please try again`;this._addMessage({role:r,name:c,content:t});continue}if(a&&a!==c){const t=`Invalid function_call: ${JSON.stringify(c)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:r,name:c,content:t});continue}let p;try{p=Wt(f)?await f.parse(h):h}catch(t){this._addMessage({role:r,name:c,content:t instanceof Error?t.message:String(t)});continue}const d=await f.function(p,this),g=de(this,Gt,"m",fe).call(this,d);if(this._addMessage({role:r,name:c,content:g}),a)return}}async _runTools(t,e,n){const r="tool",{tool_choice:s="auto",stream:o,...i}=e,a="string"!=typeof s&&s?.function?.name,{maxChatCompletions:c=ge}=n||{},u={};for(const t of e.tools)"function"===t.type&&(u[t.function.name||t.function.function.name]=t.function);const l="tools"in e?e.tools.map((t=>"function"===t.type?{type:"function",function:{name:t.function.name||t.function.function.name,parameters:t.function.parameters,description:t.function.description}}:t)):void 0;for(const t of e.messages)this._addMessage(t,!1);for(let e=0;e<c;++e){const e=await this._createChatCompletion(t,{...i,tool_choice:s,tools:l,messages:[...this.messages]},n),o=e.choices[0]?.message;if(!o)throw new w("missing message in ChatCompletion response");if(!o.tool_calls)return;for(const t of o.tool_calls){if("function"!==t.type)continue;const e=t.id,{name:n,arguments:s}=t.function,o=u[n];if(!o){const t=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${l.map((t=>JSON.stringify(t.function.name))).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:e,content:t});continue}if(a&&a!==n){const t=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:r,tool_call_id:e,content:t});continue}let i;try{i=Wt(o)?await o.parse(s):s}catch(t){const n=t instanceof Error?t.message:String(t);this._addMessage({role:r,tool_call_id:e,content:n});continue}const c=await o.function(i,this),h=de(this,Gt,"m",fe).call(this,c);if(this._addMessage({role:r,tool_call_id:e,content:h}),a)return}}}}zt=new WeakMap,Kt=new WeakMap,Vt=new WeakMap,Yt=new WeakMap,Qt=new WeakMap,Zt=new WeakMap,te=new WeakMap,ee=new WeakMap,ne=new WeakMap,re=new WeakMap,se=new WeakMap,le=new WeakMap,Gt=new WeakSet,oe=function(){return de(this,Gt,"m",ie).call(this).content??null},ie=function(){let t=this.messages.length;for(;t-- >0;){const e=this.messages[t];if(Xt(e))return{...e,content:e.content??null}}throw new w("stream ended without producing a ChatCompletionMessage with role=assistant")},ae=function(){for(let t=this.messages.length-1;t>=0;t--){const e=this.messages[t];if(Xt(e)&&e?.function_call)return e.function_call;if(Xt(e)&&e?.tool_calls?.length)return e.tool_calls.at(-1)?.function}},ce=function(){for(let t=this.messages.length-1;t>=0;t--){const e=this.messages[t];if(Ht(e)&&null!=e.content)return e.content;if(Jt(e)&&null!=e.content&&this.messages.some((t=>"assistant"===t.role&&t.tool_calls?.some((t=>"function"===t.type&&t.id===e.tool_call_id)))))return e.content}},ue=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:e}of this._chatCompletions)e&&(t.completion_tokens+=e.completion_tokens,t.prompt_tokens+=e.prompt_tokens,t.total_tokens+=e.total_tokens);return t},he=function(t){if(null!=t.n&&t.n>1)throw new w("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},fe=function(t){return"string"==typeof t?t:void 0===t?"undefined":JSON.stringify(t)};class me extends ye{static runFunctions(t,e,n){const r=new me,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run((()=>r._runFunctions(t,e,s))),r}static runTools(t,e,n){const r=new me,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run((()=>r._runTools(t,e,s))),r}_addMessage(t){super._addMessage(t),Xt(t)&&t.content&&this._emit("content",t.content)}}var we,be,ve,_e,Ee,xe,Ae,Ie=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)},Re=function(t,e,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(t,n):s?s.value=n:e.set(t,n),n};class Se extends ye{constructor(){super(...arguments),we.add(this),be.set(this,void 0)}get currentChatCompletionSnapshot(){return Ie(this,be,"f")}static fromReadableStream(t){const e=new Se;return e._run((()=>e._fromReadableStream(t))),e}static createChatCompletion(t,e,n){const r=new Se;return r._run((()=>r._runChatCompletion(t,{...e,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}}))),r}async _createChatCompletion(t,e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),Ie(this,we,"m",ve).call(this);const s=await t.create({...e,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const t of s)Ie(this,we,"m",_e).call(this,t);if(s.controller.signal?.aborted)throw new v;return this._addChatCompletion(Ie(this,we,"m",Ee).call(this))}async _fromReadableStream(t,e){const n=e?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",(()=>this.controller.abort()))),Ie(this,we,"m",ve).call(this),this._connected();const r=$.fromReadableStream(t,this.controller);let s;for await(const t of r)s&&s!==t.id&&this._addChatCompletion(Ie(this,we,"m",Ee).call(this)),Ie(this,we,"m",_e).call(this,t),s=t.id;if(r.controller.signal?.aborted)throw new v;return this._addChatCompletion(Ie(this,we,"m",Ee).call(this))}[(be=new WeakMap,we=new WeakSet,ve=function(){this.ended||Re(this,be,void 0,"f")},_e=function(t){if(this.ended)return;const e=Ie(this,we,"m",xe).call(this,t);this._emit("chunk",t,e);const n=t.choices[0]?.delta?.content,r=e.choices[0]?.message;null!=n&&"assistant"===r?.role&&r?.content&&this._emit("content",n,r.content)},Ee=function(){if(this.ended)throw new w("stream has ended, this shouldn't happen");const t=Ie(this,be,"f");if(!t)throw new w("request ended without sending any chunks");return Re(this,be,void 0,"f"),function(t){const{id:e,choices:n,created:r,model:s,system_fingerprint:o,...i}=t;return{...i,id:e,choices:n.map((({message:e,finish_reason:n,index:r,logprobs:s,...o})=>{if(!n)throw new w(`missing finish_reason for choice ${r}`);const{content:i=null,function_call:a,tool_calls:c,...u}=e,l=e.role;if(!l)throw new w(`missing role for choice ${r}`);if(a){const{arguments:t,name:e}=a;if(null==t)throw new w(`missing function_call.arguments for choice ${r}`);if(!e)throw new w(`missing function_call.name for choice ${r}`);return{...o,message:{content:i,function_call:{arguments:t,name:e},role:l},finish_reason:n,index:r,logprobs:s}}return c?{...o,index:r,finish_reason:n,logprobs:s,message:{...u,role:l,content:i,tool_calls:c.map(((e,n)=>{const{function:s,type:o,id:i,...a}=e,{arguments:c,name:u,...l}=s||{};if(null==i)throw new w(`missing choices[${r}].tool_calls[${n}].id\n${Be(t)}`);if(null==o)throw new w(`missing choices[${r}].tool_calls[${n}].type\n${Be(t)}`);if(null==u)throw new w(`missing choices[${r}].tool_calls[${n}].function.name\n${Be(t)}`);if(null==c)throw new w(`missing choices[${r}].tool_calls[${n}].function.arguments\n${Be(t)}`);return{...a,id:i,type:o,function:{...l,name:u,arguments:c}}}))}}:{...o,message:{...u,content:i,role:l},finish_reason:n,index:r,logprobs:s}})),created:r,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}}}(t)},xe=function(t){var e,n,r;let s=Ie(this,be,"f");const{choices:o,...i}=t;s?Object.assign(s,i):s=Re(this,be,{...i,choices:[]},"f");for(const{delta:o,finish_reason:i,index:a,logprobs:c=null,...u}of t.choices){let t=s.choices[a];if(t||(t=s.choices[a]={finish_reason:i,index:a,message:{},logprobs:c,...u}),c)if(t.logprobs){const{content:n,...r}=c;Object.assign(t.logprobs,r),n&&((e=t.logprobs).content??(e.content=[]),t.logprobs.content.push(...n))}else t.logprobs=Object.assign({},c);if(i&&(t.finish_reason=i),Object.assign(t,u),!o)continue;const{content:l,function_call:h,role:f,tool_calls:p,...d}=o;if(Object.assign(t.message,d),l&&(t.message.content=(t.message.content||"")+l),f&&(t.message.role=f),h&&(t.message.function_call?(h.name&&(t.message.function_call.name=h.name),h.arguments&&((n=t.message.function_call).arguments??(n.arguments=""),t.message.function_call.arguments+=h.arguments)):t.message.function_call=h),p){t.message.tool_calls||(t.message.tool_calls=[]);for(const{index:e,id:n,type:s,function:o,...i}of p){const a=(r=t.message.tool_calls)[e]??(r[e]={});Object.assign(a,i),n&&(a.id=n),s&&(a.type=s),o&&(a.function??(a.function={arguments:""})),o?.name&&(a.function.name=o.name),o?.arguments&&(a.function.arguments+=o.arguments)}}}return s},Symbol.asyncIterator)](){const t=[],e=[];let n=!1;return this.on("chunk",(n=>{const r=e.shift();r?r(n):t.push(n)})),this.on("end",(()=>{n=!0;for(const t of e)t(void 0);e.length=0})),{next:async()=>t.length?{value:t.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((t=>e.push(t))).then((t=>t?{value:t,done:!1}:{value:void 0,done:!0}))}}toReadableStream(){return new $(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Be(t){return JSON.stringify(t)}class Pe extends Se{static fromReadableStream(t){const e=new Pe;return e._run((()=>e._fromReadableStream(t))),e}static runFunctions(t,e,n){const r=new Pe,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run((()=>r._runFunctions(t,e,s))),r}static runTools(t,e,n){const r=new Pe,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run((()=>r._runTools(t,e,s))),r}}class Oe extends vt{runFunctions(t,e){return t.stream?Pe.runFunctions(this._client.chat.completions,t,e):me.runFunctions(this._client.chat.completions,t,e)}runTools(t,e){return t.stream?Pe.runTools(this._client.chat.completions,t,e):me.runTools(this._client.chat.completions,t,e)}stream(t,e){return Se.createChatCompletion(this._client.chat.completions,t,e)}}class Ce extends vt{constructor(){super(...arguments),this.completions=new Oe(this._client)}}!function(t){t.Completions=Oe}(Ce||(Ce={}));class $e extends vt{retrieve(t,e,n,r){return this._client.get(`/threads/${t}/messages/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(t,e,n={},r){return et(n)?this.list(t,e,{},n):this._client.getAPIList(`/threads/${t}/messages/${e}/files`,Le,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}}class Le extends bt{}!function(t){t.MessageFilesPage=Le}($e||($e={}));class Te extends vt{constructor(){super(...arguments),this.files=new $e(this._client)}create(t,e,n){return this._client.post(`/threads/${t}/messages`,{body:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}retrieve(t,e,n){return this._client.get(`/threads/${t}/messages/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}update(t,e,n,r){return this._client.post(`/threads/${t}/messages/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(t,e={},n){return et(e)?this.list(t,{},e):this._client.getAPIList(`/threads/${t}/messages`,Ue,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class Ue extends bt{}!function(t){t.ThreadMessagesPage=Ue,t.Files=$e,t.MessageFilesPage=Le}(Te||(Te={}));class ke extends vt{retrieve(t,e,n,r){return this._client.get(`/threads/${t}/runs/${e}/steps/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(t,e,n={},r){return et(n)?this.list(t,e,{},n):this._client.getAPIList(`/threads/${t}/runs/${e}/steps`,je,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}}class je extends bt{}!function(t){t.RunStepsPage=je}(ke||(ke={}));class Me extends vt{constructor(){super(...arguments),this.steps=new ke(this._client)}create(t,e,n){return this._client.post(`/threads/${t}/runs`,{body:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}retrieve(t,e,n){return this._client.get(`/threads/${t}/runs/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}update(t,e,n,r){return this._client.post(`/threads/${t}/runs/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(t,e={},n){return et(e)?this.list(t,{},e):this._client.getAPIList(`/threads/${t}/runs`,Ne,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}cancel(t,e,n){return this._client.post(`/threads/${t}/runs/${e}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}submitToolOutputs(t,e,n,r){return this._client.post(`/threads/${t}/runs/${e}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}}class Ne extends bt{}!function(t){t.RunsPage=Ne,t.Steps=ke,t.RunStepsPage=je}(Me||(Me={}));class Fe extends vt{constructor(){super(...arguments),this.runs=new Me(this._client),this.messages=new Te(this._client)}create(t={},e){return et(t)?this.create({},t):this._client.post("/threads",{body:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e?.headers}})}retrieve(t,e){return this._client.get(`/threads/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e?.headers}})}update(t,e,n){return this._client.post(`/threads/${t}`,{body:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}del(t,e){return this._client.delete(`/threads/${t}`,{...e,headers:{"OpenAI-Beta":"assistants=v1",...e?.headers}})}createAndRun(t,e){return this._client.post("/threads/runs",{body:t,...e,headers:{"OpenAI-Beta":"assistants=v1",...e?.headers}})}}!function(t){t.Runs=Me,t.RunsPage=Ne,t.Messages=Te,t.ThreadMessagesPage=Ue}(Fe||(Fe={}));class qe extends vt{constructor(){super(...arguments),this.chat=new Ce(this._client),this.assistants=new qt(this._client),this.threads=new Fe(this._client)}}!function(t){t.Chat=Ce,t.Assistants=qt,t.AssistantsPage=Dt,t.Threads=Fe}(qe||(qe={}));class De extends V{constructor({baseURL:t=ft("OPENAI_BASE_URL"),apiKey:e=ft("OPENAI_API_KEY"),organization:n=ft("OPENAI_ORG_ID")??null,...r}={}){if(void 0===e)throw new w("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:e,organization:n,...r,baseURL:t||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new w("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new _t(this),this.chat=new xt(this),this.embeddings=new At(this),this.files=new It(this),this.images=new St(this),this.audio=new Ct(this),this.moderations=new $t(this),this.models=new Lt(this),this.fineTuning=new Mt(this),this.beta=new qe(this),this._options=s,this.apiKey=e,this.organization=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}}Ae=De,De.OpenAI=Ae,De.OpenAIError=w,De.APIError=b,De.APIConnectionError=_,De.APIConnectionTimeoutError=E,De.APIUserAbortError=v,De.NotFoundError=R,De.ConflictError=S,De.RateLimitError=P,De.BadRequestError=x,De.AuthenticationError=A,De.InternalServerError=O,De.PermissionDeniedError=I,De.UnprocessableEntityError=B;const{OpenAIError:We,APIError:Xe,APIConnectionError:He,APIConnectionTimeoutError:Je,APIUserAbortError:Ge,NotFoundError:ze,ConflictError:Ke,RateLimitError:Ve,BadRequestError:Ye,AuthenticationError:Qe,InternalServerError:Ze,PermissionDeniedError:tn,UnprocessableEntityError:en}=t;function nn(t){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nn(t)}function rn(){rn=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new O(r||[]);return s(i,"_invoke",{value:R(t,n,a)}),i}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",d="executing",g="completed",y={};function m(){}function w(){}function b(){}var v={};u(v,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(C([])));E&&E!==n&&r.call(E,i)&&(v=E);var x=b.prototype=m.prototype=Object.create(v);function A(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(s,o,i,a){var c=h(t[s],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==nn(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,a)}))}a(c.arg)}var o;s(this,"_invoke",{value:function(t,r){function s(){return new e((function(e,s){n(t,r,e,s)}))}return o=o?o.then(s,s):s()}})}function R(e,n,r){var s=f;return function(o,i){if(s===d)throw new Error("Generator is already running");if(s===g){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(s===f)throw s=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s=d;var u=h(e,n,r);if("normal"===u.type){if(s=r.done?g:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(s=g,r.method="throw",r.arg=u.arg)}}}function S(e,n){var r=n.method,s=e.iterator[r];if(s===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=h(s,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function B(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(B,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function n(){for(;++s<e.length;)if(r.call(e,s))return n.value=e[s],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(nn(e)+" is not iterable")}return w.prototype=b,s(x,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:w,configurable:!0}),w.displayName=u(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},A(I.prototype),u(I.prototype,a,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,s,o){void 0===o&&(o=Promise);var i=new I(l(t,n,r,s),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function s(r,s){return a.type="throw",a.arg=e,n.next=r,s&&(n.method="next",n.arg=t),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return s("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return s(i.catchLoc,!0);if(this.prev<i.finallyLoc)return s(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return s(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return s(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var o=s;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var s=r.arg;P(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function sn(t,e,n,r,s,o,i){try{var a=t[o](i),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,s)}!function(t){t.toFile=N,t.fileFromPath=l,t.Page=wt,t.CursorPage=bt,t.Completions=_t,t.Chat=xt,t.Embeddings=At,t.Files=It,t.FileObjectsPage=Rt,t.Images=St,t.Audio=Ct,t.Moderations=$t,t.Models=Lt,t.ModelsPage=Tt,t.FineTuning=Mt,t.Beta=qe}(De||(De={}));var on=new De({apiKey:woonft_params.ai_key,dangerouslyAllowBrowser:!0});window.imgResponse=function(){var t,e=(t=rn().mark((function t(e){return rn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,on.images.generate({prompt:e,size:"1024x1024",model:"dall-e-3",style:"vivid"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,s){var o=t.apply(e,n);function i(t){sn(o,r,s,i,a,"next",t)}function a(t){sn(o,r,s,i,a,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}()})()})();